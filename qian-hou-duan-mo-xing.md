## "数据库"模型

后端返回模型,主要依赖数据库结构\(ERP特色\),其他由前端组合,结构转换统一处理,数组使用空对象\[\],用处如下

* 防止命名尴尬

组织名称在不同业务下命名不同,name,orgname,org\_name

* 快速拓展师,对业务的冲突

因为业务相似,materielname可能会被理解为,物资名,物料名,服务名或者工程名-.-

* 为了渲染层

前端,你懂的

## 依赖业务id

path+业务id,可获取到所需业务模型

注:主要用于梳理各种列表框,列表框内容需要记录业务id,而非使用联合关联之类的方式进行打开

## [关联模型](https://github.com/Glimis/blog/blob/master/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/%E5%85%B3%E8%81%94%E6%93%8D%E4%BD%9C.md#独立模型前端标记)

项目使用两种方式

* 独立模型,前端标记

此处对grid有影响,有id删除,将row设置为del,无id可直接删除,对与各种统计,需要过滤掉del的情况,ui分两种,直接隐藏或状态为删除

* 独立删除

后台依次提供删除接口,直接进行"物理摧毁",ui默认直接删除

## 协同

此处指,在本次修改过程中,获取数据到提交数据时,有其他人已经修改了内容的情况,业务模型下带有\_r系列\(为模型最后一次修改时间\)误动,两种交互

* 提示,再次提交

保存时,对\_r不符情况,会返回最新模型,提示,覆盖 or 更新,覆盖会强制保存\(更新\_r,再次提交\),更新会转换为新模型,做diff分析\(依赖ui\),用户重新修改

* 强制

管他那么多,最新的一次最大嘛,常见





